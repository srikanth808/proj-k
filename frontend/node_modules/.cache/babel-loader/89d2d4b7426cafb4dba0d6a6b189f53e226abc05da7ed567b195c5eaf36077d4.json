{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Schedule=()=>{const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetch=async()=>{try{const res=await api.get('/matches/');setMatches(res.data);}catch(err){console.error('Failed to fetch matches',err);}finally{setLoading(false);}};fetch();},[]);const updateMatch=async(id,patch)=>{try{const res=await api.patch(\"/matches/\".concat(id,\"/\"),patch);setMatches(prev=>prev.map(m=>m.id===id?res.data:m));}catch(err){console.error('Failed to update match',err);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{padding:16},children:\"Loading schedule\\u2026\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Match Schedule\"}),matches.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No matches scheduled.\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Court\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fixture\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:matches.map(m=>{var _m$court_number,_m$fixture,_m$fixture$player,_m$fixture2,_m$fixture2$player;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:(_m$court_number=m.court_number)!==null&&_m$court_number!==void 0?_m$court_number:'Unassigned'}),/*#__PURE__*/_jsx(\"td\",{children:new Date(m.scheduled_time).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(((_m$fixture=m.fixture)===null||_m$fixture===void 0?void 0:(_m$fixture$player=_m$fixture.player1)===null||_m$fixture$player===void 0?void 0:_m$fixture$player.name)||'TBD',\" vs \").concat(((_m$fixture2=m.fixture)===null||_m$fixture2===void 0?void 0:(_m$fixture2$player=_m$fixture2.player2)===null||_m$fixture2$player===void 0?void 0:_m$fixture2$player.name)||'TBD')}),/*#__PURE__*/_jsx(\"td\",{children:m.status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateMatch(m.id,{status:'LIVE'}),style:{marginRight:8},children:\"Set Live\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateMatch(m.id,{status:'COMPLETED'}),style:{marginRight:8},children:\"Set Completed\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const court=prompt('Assign court number (integer)');if(court)updateMatch(m.id,{court_number:parseInt(court,10)||null});},children:\"Assign Court\"})]})]},m.id);})})]})]});};export default Schedule;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Schedule","matches","setMatches","loading","setLoading","fetch","res","get","data","err","console","error","updateMatch","id","patch","concat","prev","map","m","style","padding","children","length","_m$court_number","_m$fixture","_m$fixture$player","_m$fixture2","_m$fixture2$player","court_number","Date","scheduled_time","toLocaleString","fixture","player1","name","player2","status","onClick","marginRight","court","prompt","parseInt"],"sources":["S:/proj k/frontend/src/pages/Schedule.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\ntype Match = {\r\n\tid: number;\r\n\tfixture: any;\r\n\tcourt_number: number | null;\r\n\tscheduled_time: string;\r\n\tstatus: string;\r\n\twinner: any | null;\r\n};\r\n\r\nconst Schedule: React.FC = () => {\r\n\tconst [matches, setMatches] = useState<Match[]>([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetch = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await api.get('/matches/');\r\n\t\t\t\tsetMatches(res.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('Failed to fetch matches', err);\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetch();\r\n\t}, []);\r\n\r\n\tconst updateMatch = async (id: number, patch: Partial<Match>) => {\r\n\t\ttry {\r\n\t\t\tconst res = await api.patch(`/matches/${id}/`, patch);\r\n\t\t\tsetMatches(prev => prev.map(m => (m.id === id ? res.data : m)));\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('Failed to update match', err);\r\n\t\t}\r\n\t};\r\n\r\n\tif (loading) return <div style={{ padding: 16 }}>Loading scheduleâ€¦</div>;\r\n\r\n\treturn (\r\n\t\t<div style={{ padding: 16 }}>\r\n\t\t\t<h2>Match Schedule</h2>\r\n\t\t\t{matches.length === 0 && <p>No matches scheduled.</p>}\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Court</th>\r\n\t\t\t\t\t\t<th>Time</th>\r\n\t\t\t\t\t\t<th>Fixture</th>\r\n\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t<th>Actions</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{matches.map(m => (\r\n\t\t\t\t\t\t<tr key={m.id}>\r\n\t\t\t\t\t\t\t<td>{m.court_number ?? 'Unassigned'}</td>\r\n\t\t\t\t\t\t\t<td>{new Date(m.scheduled_time).toLocaleString()}</td>\r\n\t\t\t\t\t\t\t<td>{`${m.fixture?.player1?.name || 'TBD'} vs ${m.fixture?.player2?.name || 'TBD'}`}</td>\r\n\t\t\t\t\t\t\t<td>{m.status}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<button onClick={() => updateMatch(m.id, { status: 'LIVE' })} style={{ marginRight: 8 }}>Set Live</button>\r\n\t\t\t\t\t\t\t\t<button onClick={() => updateMatch(m.id, { status: 'COMPLETED' })} style={{ marginRight: 8 }}>Set Completed</button>\r\n\t\t\t\t\t\t\t\t<button onClick={() => {\r\n\t\t\t\t\t\t\t\t\tconst court = prompt('Assign court number (integer)');\r\n\t\t\t\t\t\t\t\t\tif (court) updateMatch(m.id, { court_number: parseInt(court, 10) || null });\r\n\t\t\t\t\t\t\t\t}}>Assign Court</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Schedule;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAWlC,KAAM,CAAAC,QAAkB,CAAGA,CAAA,GAAM,CAChC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAU,EAAE,CAAC,CACnD,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACf,KAAM,CAAAY,KAAK,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACH,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,GAAG,CAACY,GAAG,CAAC,WAAW,CAAC,CACtCL,UAAU,CAACI,GAAG,CAACE,IAAI,CAAC,CACrB,CAAE,MAAOC,GAAG,CAAE,CACbC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC9C,CAAC,OAAS,CACTL,UAAU,CAAC,KAAK,CAAC,CAClB,CACD,CAAC,CACDC,KAAK,CAAC,CAAC,CACR,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,WAAW,CAAG,KAAAA,CAAOC,EAAU,CAAEC,KAAqB,GAAK,CAChE,GAAI,CACH,KAAM,CAAAR,GAAG,CAAG,KAAM,CAAAX,GAAG,CAACmB,KAAK,aAAAC,MAAA,CAAaF,EAAE,MAAKC,KAAK,CAAC,CACrDZ,UAAU,CAACc,IAAI,EAAIA,IAAI,CAACC,GAAG,CAACC,CAAC,EAAKA,CAAC,CAACL,EAAE,GAAKA,EAAE,CAAGP,GAAG,CAACE,IAAI,CAAGU,CAAE,CAAC,CAAC,CAChE,CAAE,MAAOT,GAAG,CAAE,CACbC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC7C,CACD,CAAC,CAED,GAAIN,OAAO,CAAE,mBAAON,IAAA,QAAKsB,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAG,CAAE,CAAAC,QAAA,CAAC,wBAAiB,CAAK,CAAC,CAExE,mBACCtB,KAAA,QAAKoB,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAG,CAAE,CAAAC,QAAA,eAC3BxB,IAAA,OAAAwB,QAAA,CAAI,gBAAc,CAAI,CAAC,CACtBpB,OAAO,CAACqB,MAAM,GAAK,CAAC,eAAIzB,IAAA,MAAAwB,QAAA,CAAG,uBAAqB,CAAG,CAAC,cACrDtB,KAAA,UAAAsB,QAAA,eACCxB,IAAA,UAAAwB,QAAA,cACCtB,KAAA,OAAAsB,QAAA,eACCxB,IAAA,OAAAwB,QAAA,CAAI,OAAK,CAAI,CAAC,cACdxB,IAAA,OAAAwB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbxB,IAAA,OAAAwB,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBxB,IAAA,OAAAwB,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxB,IAAA,OAAAwB,QAAA,CAAI,SAAO,CAAI,CAAC,EACb,CAAC,CACC,CAAC,cACRxB,IAAA,UAAAwB,QAAA,CACEpB,OAAO,CAACgB,GAAG,CAACC,CAAC,OAAAK,eAAA,CAAAC,UAAA,CAAAC,iBAAA,CAAAC,WAAA,CAAAC,kBAAA,oBACb5B,KAAA,OAAAsB,QAAA,eACCxB,IAAA,OAAAwB,QAAA,EAAAE,eAAA,CAAKL,CAAC,CAACU,YAAY,UAAAL,eAAA,UAAAA,eAAA,CAAI,YAAY,CAAK,CAAC,cACzC1B,IAAA,OAAAwB,QAAA,CAAK,GAAI,CAAAQ,IAAI,CAACX,CAAC,CAACY,cAAc,CAAC,CAACC,cAAc,CAAC,CAAC,CAAK,CAAC,cACtDlC,IAAA,OAAAwB,QAAA,IAAAN,MAAA,CAAQ,EAAAS,UAAA,CAAAN,CAAC,CAACc,OAAO,UAAAR,UAAA,kBAAAC,iBAAA,CAATD,UAAA,CAAWS,OAAO,UAAAR,iBAAA,iBAAlBA,iBAAA,CAAoBS,IAAI,GAAI,KAAK,SAAAnB,MAAA,CAAO,EAAAW,WAAA,CAAAR,CAAC,CAACc,OAAO,UAAAN,WAAA,kBAAAC,kBAAA,CAATD,WAAA,CAAWS,OAAO,UAAAR,kBAAA,iBAAlBA,kBAAA,CAAoBO,IAAI,GAAI,KAAK,EAAO,CAAC,cACzFrC,IAAA,OAAAwB,QAAA,CAAKH,CAAC,CAACkB,MAAM,CAAK,CAAC,cACnBrC,KAAA,OAAAsB,QAAA,eACCxB,IAAA,WAAQwC,OAAO,CAAEA,CAAA,GAAMzB,WAAW,CAACM,CAAC,CAACL,EAAE,CAAE,CAAEuB,MAAM,CAAE,MAAO,CAAC,CAAE,CAACjB,KAAK,CAAE,CAAEmB,WAAW,CAAE,CAAE,CAAE,CAAAjB,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1GxB,IAAA,WAAQwC,OAAO,CAAEA,CAAA,GAAMzB,WAAW,CAACM,CAAC,CAACL,EAAE,CAAE,CAAEuB,MAAM,CAAE,WAAY,CAAC,CAAE,CAACjB,KAAK,CAAE,CAAEmB,WAAW,CAAE,CAAE,CAAE,CAAAjB,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpHxB,IAAA,WAAQwC,OAAO,CAAEA,CAAA,GAAM,CACtB,KAAM,CAAAE,KAAK,CAAGC,MAAM,CAAC,+BAA+B,CAAC,CACrD,GAAID,KAAK,CAAE3B,WAAW,CAACM,CAAC,CAACL,EAAE,CAAE,CAAEe,YAAY,CAAEa,QAAQ,CAACF,KAAK,CAAE,EAAE,CAAC,EAAI,IAAK,CAAC,CAAC,CAC5E,CAAE,CAAAlB,QAAA,CAAC,cAAY,CAAQ,CAAC,EACrB,CAAC,GAZGH,CAAC,CAACL,EAaP,CAAC,EACL,CAAC,CACI,CAAC,EACF,CAAC,EACJ,CAAC,CAER,CAAC,CAED,cAAe,CAAAb,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}