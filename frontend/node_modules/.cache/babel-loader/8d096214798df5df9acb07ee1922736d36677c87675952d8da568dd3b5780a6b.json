{"ast":null,"code":"import _objectSpread from\"S:/proj k/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LiveScore=()=>{var _selected$fixture,_selected$fixture$pla,_selected$fixture2,_selected$fixture2$pl,_selected$fixture3,_selected$fixture3$pl,_selected$fixture4,_selected$fixture4$pl;const[matches,setMatches]=useState([]);const[selected,setSelected]=useState(null);const[p1Score,setP1Score]=useState(0);const[p2Score,setP2Score]=useState(0);useEffect(()=>{const fetch=async()=>{try{const res=await api.get('/matches/');setMatches(res.data);}catch(err){console.error(err);}};fetch();},[]);const startLive=async m=>{try{await api.patch(\"/matches/\".concat(m.id,\"/\"),{status:'LIVE'});setSelected(_objectSpread(_objectSpread({},m),{},{status:'LIVE'}));}catch(err){console.error(err);}};const addPoint=forPlayer=>{if(!selected)return;if(forPlayer==='p1')setP1Score(s=>s+1);else setP2Score(s=>s+1);};const finishMatch=async()=>{if(!selected)return;const winner=p1Score>p2Score?selected.fixture.player1:selected.fixture.player2;try{await api.patch(\"/matches/\".concat(selected.id,\"/\"),{status:'COMPLETED',winner:(winner===null||winner===void 0?void 0:winner.id)||null});alert(\"Match completed. Winner: \".concat((winner===null||winner===void 0?void 0:winner.name)||'TBD'));setSelected(null);setP1Score(0);setP2Score(0);}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Live Score\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:24},children:[/*#__PURE__*/_jsxs(\"div\",{style:{minWidth:320},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Matches\"}),/*#__PURE__*/_jsx(\"ul\",{children:matches.map(m=>{var _m$fixture,_m$fixture$player,_m$fixture2,_m$fixture2$player;return/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:8},children:[\"\".concat(((_m$fixture=m.fixture)===null||_m$fixture===void 0?void 0:(_m$fixture$player=_m$fixture.player1)===null||_m$fixture$player===void 0?void 0:_m$fixture$player.name)||'TBD',\" vs \").concat(((_m$fixture2=m.fixture)===null||_m$fixture2===void 0?void 0:(_m$fixture2$player=_m$fixture2.player2)===null||_m$fixture2$player===void 0?void 0:_m$fixture2$player.name)||'TBD'),\" \\u2014 \",m.status,/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startLive(m),style:{marginTop:4},children:\"Start Live\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelected(m),style:{marginLeft:8},children:\"Open\"})]})]},m.id);})})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:selected?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\".concat(((_selected$fixture=selected.fixture)===null||_selected$fixture===void 0?void 0:(_selected$fixture$pla=_selected$fixture.player1)===null||_selected$fixture$pla===void 0?void 0:_selected$fixture$pla.name)||'TBD',\" vs \").concat(((_selected$fixture2=selected.fixture)===null||_selected$fixture2===void 0?void 0:(_selected$fixture2$pl=_selected$fixture2.player2)===null||_selected$fixture2$pl===void 0?void 0:_selected$fixture2$pl.name)||'TBD')}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:((_selected$fixture3=selected.fixture)===null||_selected$fixture3===void 0?void 0:(_selected$fixture3$pl=_selected$fixture3.player1)===null||_selected$fixture3$pl===void 0?void 0:_selected$fixture3$pl.name)||'Player 1'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:24},children:p1Score}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addPoint('p1'),children:\"+1 Point\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:((_selected$fixture4=selected.fixture)===null||_selected$fixture4===void 0?void 0:(_selected$fixture4$pl=_selected$fixture4.player2)===null||_selected$fixture4$pl===void 0?void 0:_selected$fixture4$pl.name)||'Player 2'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:24},children:p2Score}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addPoint('p2'),children:\"+1 Point\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"button\",{onClick:finishMatch,children:\"Finish Match\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelected(null);setP1Score(0);setP2Score(0);},style:{marginLeft:8},children:\"Close\"})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Select a match to open the live score.\"})})]})]});};export default LiveScore;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","LiveScore","_selected$fixture","_selected$fixture$pla","_selected$fixture2","_selected$fixture2$pl","_selected$fixture3","_selected$fixture3$pl","_selected$fixture4","_selected$fixture4$pl","matches","setMatches","selected","setSelected","p1Score","setP1Score","p2Score","setP2Score","fetch","res","get","data","err","console","error","startLive","m","patch","concat","id","status","_objectSpread","addPoint","forPlayer","s","finishMatch","winner","fixture","player1","player2","alert","name","style","padding","children","display","gap","minWidth","map","_m$fixture","_m$fixture$player","_m$fixture2","_m$fixture2$player","marginBottom","onClick","marginTop","marginLeft","flex","fontSize"],"sources":["S:/proj k/frontend/src/pages/LiveScore.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\ntype Match = {\r\n\tid: number;\r\n\tfixture: any;\r\n\tstatus: string;\r\n};\r\n\r\nconst LiveScore: React.FC = () => {\r\n\tconst [matches, setMatches] = useState<Match[]>([]);\r\n\tconst [selected, setSelected] = useState<Match | null>(null);\r\n\tconst [p1Score, setP1Score] = useState(0);\r\n\tconst [p2Score, setP2Score] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetch = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await api.get('/matches/');\r\n\t\t\t\tsetMatches(res.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tfetch();\r\n\t}, []);\r\n\r\n\tconst startLive = async (m: Match) => {\r\n\t\ttry {\r\n\t\t\tawait api.patch(`/matches/${m.id}/`, { status: 'LIVE' });\r\n\t\t\tsetSelected({ ...m, status: 'LIVE' });\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst addPoint = (forPlayer: 'p1' | 'p2') => {\r\n\t\tif (!selected) return;\r\n\t\tif (forPlayer === 'p1') setP1Score(s => s + 1);\r\n\t\telse setP2Score(s => s + 1);\r\n\t};\r\n\r\n\tconst finishMatch = async () => {\r\n\t\tif (!selected) return;\r\n\t\tconst winner = p1Score > p2Score ? selected.fixture.player1 : selected.fixture.player2;\r\n\t\ttry {\r\n\t\t\tawait api.patch(`/matches/${selected.id}/`, { status: 'COMPLETED', winner: winner?.id || null });\r\n\t\t\talert(`Match completed. Winner: ${winner?.name || 'TBD'}`);\r\n\t\t\tsetSelected(null);\r\n\t\t\tsetP1Score(0);\r\n\t\t\tsetP2Score(0);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ padding: 16 }}>\r\n\t\t\t<h2>Live Score</h2>\r\n\t\t\t<div style={{ display: 'flex', gap: 24 }}>\r\n\t\t\t\t<div style={{ minWidth: 320 }}>\r\n\t\t\t\t\t<h3>Matches</h3>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{matches.map(m => (\r\n\t\t\t\t\t\t\t<li key={m.id} style={{ marginBottom: 8 }}>\r\n\t\t\t\t\t\t\t\t{`${m.fixture?.player1?.name || 'TBD'} vs ${m.fixture?.player2?.name || 'TBD'}`} â€” {m.status}\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<button onClick={() => startLive(m)} style={{ marginTop: 4 }}>Start Live</button>\r\n\t\t\t\t\t\t\t\t\t<button onClick={() => setSelected(m)} style={{ marginLeft: 8 }}>Open</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ flex: 1 }}>\r\n\t\t\t\t\t{selected ? (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<h3>{`${selected.fixture?.player1?.name || 'TBD'} vs ${selected.fixture?.player2?.name || 'TBD'}`}</h3>\r\n\t\t\t\t\t\t\t<div style={{ display: 'flex', gap: 16 }}>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h4>{selected.fixture?.player1?.name || 'Player 1'}</h4>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: 24 }}>{p1Score}</div>\r\n\t\t\t\t\t\t\t\t\t<button onClick={() => addPoint('p1')}>+1 Point</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h4>{selected.fixture?.player2?.name || 'Player 2'}</h4>\r\n\t\t\t\t\t\t\t\t\t<div style={{ fontSize: 24 }}>{p2Score}</div>\r\n\t\t\t\t\t\t\t\t\t<button onClick={() => addPoint('p2')}>+1 Point</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style={{ marginTop: 12 }}>\r\n\t\t\t\t\t\t\t\t<button onClick={finishMatch}>Finish Match</button>\r\n\t\t\t\t\t\t\t\t<button onClick={() => { setSelected(null); setP1Score(0); setP2Score(0); }} style={{ marginLeft: 8 }}>Close</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>Select a match to open the live score.</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LiveScore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}