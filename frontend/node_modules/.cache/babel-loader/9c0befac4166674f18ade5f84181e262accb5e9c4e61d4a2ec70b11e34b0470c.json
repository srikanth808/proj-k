{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Fixtures=()=>{const[fixtures,setFixtures]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[message,setMessage]=useState('');useEffect(()=>{const fetch=async()=>{try{const res=await api.get('/fixtures/fixtures/');if(res.data&&!Array.isArray(res.data)){console.error('Unexpected response format:',res.data);setFixtures([]);setError('Unexpected response format from server');return;}setFixtures(res.data||[]);setError('');}catch(err){console.error('Error fetching fixtures:',err);setFixtures([]);setError('Failed to load fixtures');}};fetch();},[]);const generateDefault=async()=>{setLoading(true);setMessage('Generating fixtures...');try{const res=await api.post('/fixtures/generate_default/');setMessage('Fixtures generated for tournament '+res.data.tournament_id);// refresh fixtures list\nconst list=await api.get('/fixtures/fixtures/');setFixtures(Array.isArray(list.data)?list.data:[]);}catch(err){var _err$response;console.error(err);setMessage(err!==null&&err!==void 0&&(_err$response=err.response)!==null&&_err$response!==void 0&&_err$response.data?JSON.stringify(err.response.data):'Failed to generate fixtures');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:16},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Fixtures / Bracket\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"button\",{onClick:generateDefault,disabled:loading,children:\"Generate fixtures (auto)\"}),message&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:8},children:message})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),!error&&fixtures.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No fixtures yet \\u2014 use the backend fixture generator.\"}),fixtures.length>0&&/*#__PURE__*/_jsx(\"ul\",{children:fixtures.map((f,i)=>{var _f$player,_f$player2;return/*#__PURE__*/_jsx(\"li\",{children:\"Round \".concat(f.round_number,\" - Match \").concat(f.match_number,\": \").concat(((_f$player=f.player1)===null||_f$player===void 0?void 0:_f$player.name)||'TBD',\" vs \").concat(((_f$player2=f.player2)===null||_f$player2===void 0?void 0:_f$player2.name)||'TBD')},i);})})]});};export default Fixtures;","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","Fixtures","fixtures","setFixtures","loading","setLoading","error","setError","message","setMessage","fetch","res","get","data","Array","isArray","console","err","generateDefault","post","tournament_id","list","_err$response","response","JSON","stringify","style","padding","children","marginBottom","onClick","disabled","marginLeft","color","length","map","f","i","_f$player","_f$player2","concat","round_number","match_number","player1","name","player2"],"sources":["S:/proj k/frontend/src/pages/Fixtures.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../services/api';\r\n\r\nconst Fixtures: React.FC = () => {\r\n  const [fixtures, setFixtures] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      try {\r\n        const res = await api.get('/fixtures/fixtures/');\r\n        if (res.data && !Array.isArray(res.data)) {\r\n          console.error('Unexpected response format:', res.data);\r\n          setFixtures([]);\r\n          setError('Unexpected response format from server');\r\n          return;\r\n        }\r\n        setFixtures(res.data || []);\r\n        setError('');\r\n      } catch (err) {\r\n        console.error('Error fetching fixtures:', err);\r\n        setFixtures([]);\r\n        setError('Failed to load fixtures');\r\n      }\r\n    };\r\n    fetch();\r\n  }, []);\r\n\r\n  const generateDefault = async () => {\r\n    setLoading(true);\r\n    setMessage('Generating fixtures...');\r\n    try {\r\n      const res = await api.post('/fixtures/generate_default/');\r\n      setMessage('Fixtures generated for tournament ' + res.data.tournament_id);\r\n      // refresh fixtures list\r\n      const list = await api.get('/fixtures/fixtures/');\r\n      setFixtures(Array.isArray(list.data) ? list.data : []);\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setMessage(err?.response?.data ? JSON.stringify(err.response.data) : 'Failed to generate fixtures');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 16 }}>\r\n      <h2>Fixtures / Bracket</h2>\r\n      <div style={{ marginBottom: 12 }}>\r\n        <button onClick={generateDefault} disabled={loading}>Generate fixtures (auto)</button>\r\n        {message && <span style={{ marginLeft: 8 }}>{message}</span>}\r\n      </div>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      {!error && fixtures.length === 0 && <p>No fixtures yet â€” use the backend fixture generator.</p>}\r\n      {fixtures.length > 0 && (\r\n        <ul>\r\n          {fixtures.map((f, i) => (\r\n            <li key={i}>{`Round ${f.round_number} - Match ${f.match_number}: ${f.player1?.name || 'TBD'} vs ${f.player2?.name || 'TBD'}`}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Fixtures;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}