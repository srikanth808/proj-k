{"ast":null,"code":"import axios from 'axios';\nimport toast from 'react-hot-toast';\nconst API_BASE = (process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000').replace(/\\/+$/, '') + '/api';\nclass ApiService {\n  constructor() {\n    this.api = void 0;\n    this.api = axios.create({\n      baseURL: API_BASE,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      timeout: 10000\n    });\n    this.setupInterceptors();\n  }\n  setupInterceptors() {\n    // Response interceptor for error handling\n    this.api.interceptors.response.use(response => response, error => {\n      var _error$response, _error$response2, _error$response3;\n      // Handle other errors\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) >= 500) {\n        toast.error('Server error. Please try again later.');\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        toast.error('You do not have permission to perform this action.');\n      } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404) {\n        toast.error('Resource not found.');\n      } else if (error.code === 'NETWORK_ERROR' || error.code === 'ECONNABORTED') {\n        toast.error('Network error. Please check your connection.');\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  // Auth methods - simplified for registration only\n  async register(userData) {\n    // Backend UserViewSet exposes user creation at /api/auth/users/ (POST)\n    const response = await this.api.post('/auth/users/', userData);\n    return response.data;\n  }\n\n  // Generic CRUD methods\n  async get(url, config) {\n    return this.api.get(url, config);\n  }\n  async post(url, data, config) {\n    return this.api.post(url, data, config);\n  }\n  async put(url, data, config) {\n    return this.api.put(url, data, config);\n  }\n  async patch(url, data, config) {\n    return this.api.patch(url, data, config);\n  }\n  async delete(url, config) {\n    return this.api.delete(url, config);\n  }\n\n  // Specific API methods\n  async getPlayers(params) {\n    return this.api.get('/players/', {\n      params\n    });\n  }\n  async createPlayer(playerData) {\n    return this.api.post('/players/', playerData);\n  }\n  async getFixtures(params) {\n    return this.api.get('/fixtures/', {\n      params\n    });\n  }\n  async generateFixtures() {\n    return this.api.post('/fixtures/generate/');\n  }\n  async getMatches(params) {\n    return this.api.get('/matches/', {\n      params\n    });\n  }\n  async getGames(matchId) {\n    return this.api.get('/scoring/games/', {\n      params: {\n        match: matchId\n      }\n    });\n  }\n  async addPoint(gameId, playerId) {\n    return this.api.post(`/scoring/games/${gameId}/add_point/`, {\n      player: playerId\n    });\n  }\n  async undoPoint(gameId) {\n    return this.api.post(`/scoring/games/${gameId}/undo_point/`);\n  }\n  async getStats() {\n    return this.api.get('/stats/');\n  }\n  async exportData(type) {\n    return this.api.get(`/export/${type}/`, {\n      responseType: 'blob'\n    });\n  }\n}\nconst apiService = new ApiService();\nexport default apiService;","map":{"version":3,"names":["axios","toast","API_BASE","process","env","REACT_APP_API_BASE_URL","replace","ApiService","constructor","api","create","baseURL","headers","timeout","setupInterceptors","interceptors","response","use","error","_error$response","_error$response2","_error$response3","status","code","Promise","reject","register","userData","post","data","get","url","config","put","patch","delete","getPlayers","params","createPlayer","playerData","getFixtures","generateFixtures","getMatches","getGames","matchId","match","addPoint","gameId","playerId","player","undoPoint","getStats","exportData","type","responseType","apiService"],"sources":["S:/proj k/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst API_BASE = (process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000').replace(/\\/+$/, '') + '/api';\r\n\r\nclass ApiService {\r\n  private api: AxiosInstance;\r\n\r\n  constructor() {\r\n    this.api = axios.create({\r\n      baseURL: API_BASE,\r\n      headers: { 'Content-Type': 'application/json' },\r\n      timeout: 10000,\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  private setupInterceptors() {\r\n    // Response interceptor for error handling\r\n    this.api.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        // Handle other errors\r\n        if (error.response?.status >= 500) {\r\n          toast.error('Server error. Please try again later.');\r\n        } else if (error.response?.status === 403) {\r\n          toast.error('You do not have permission to perform this action.');\r\n        } else if (error.response?.status === 404) {\r\n          toast.error('Resource not found.');\r\n        } else if (error.code === 'NETWORK_ERROR' || error.code === 'ECONNABORTED') {\r\n          toast.error('Network error. Please check your connection.');\r\n        }\r\n\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Auth methods - simplified for registration only\r\n  async register(userData: any) {\r\n    // Backend UserViewSet exposes user creation at /api/auth/users/ (POST)\r\n    const response = await this.api.post('/auth/users/', userData);\r\n    return response.data;\r\n  }\r\n\r\n  // Generic CRUD methods\r\n  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\r\n    return this.api.get(url, config);\r\n  }\r\n\r\n  async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\r\n    return this.api.post(url, data, config);\r\n  }\r\n\r\n  async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\r\n    return this.api.put(url, data, config);\r\n  }\r\n\r\n  async patch<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\r\n    return this.api.patch(url, data, config);\r\n  }\r\n\r\n  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\r\n    return this.api.delete(url, config);\r\n  }\r\n\r\n  // Specific API methods\r\n  async getPlayers(params?: any) {\r\n    return this.api.get('/players/', { params });\r\n  }\r\n\r\n  async createPlayer(playerData: any) {\r\n    return this.api.post('/players/', playerData);\r\n  }\r\n\r\n  async getFixtures(params?: any) {\r\n    return this.api.get('/fixtures/', { params });\r\n  }\r\n\r\n  async generateFixtures() {\r\n    return this.api.post('/fixtures/generate/');\r\n  }\r\n\r\n  async getMatches(params?: any) {\r\n    return this.api.get('/matches/', { params });\r\n  }\r\n\r\n  async getGames(matchId: string) {\r\n    return this.api.get('/scoring/games/', { params: { match: matchId } });\r\n  }\r\n\r\n  async addPoint(gameId: string, playerId: string) {\r\n    return this.api.post(`/scoring/games/${gameId}/add_point/`, { player: playerId });\r\n  }\r\n\r\n  async undoPoint(gameId: string) {\r\n    return this.api.post(`/scoring/games/${gameId}/undo_point/`);\r\n  }\r\n\r\n  async getStats() {\r\n    return this.api.get('/stats/');\r\n  }\r\n\r\n  async exportData(type: 'pdf' | 'csv' | 'excel') {\r\n    return this.api.get(`/export/${type}/`, { responseType: 'blob' });\r\n  }\r\n}\r\n\r\nconst apiService = new ApiService();\r\nexport default apiService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}